{% extends "base.html" %}

{% block title %}Schedule{% endblock %}

{% block extra_css %}
<link href="{{ url_for('static', filename='css/schedule.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
<!-- Schedule Header -->
{% include 'schedule/partials/header.html' %}

<!-- Schedule Grid -->
{% include 'schedule/partials/grid.html' %}

<!-- Context Menus -->
{% include 'schedule/partials/context_menus.html' %}

<!-- All Modals -->
{% include 'schedule/partials/modals.html' %}
{% endblock %}

{% block extra_js %}
<!-- Pass template variables to JavaScript -->
<script>
window.scheduleConfig = {
    viewType: '{{ view_type }}',
    canEdit: {{ can_edit|lower }},
    selectedDate: '{{ selected_date.isoformat() }}',
    teamMembers: {
        {% for member in team_members %}
        {{ member.id }}: {
            name: '{{ member.full_name }}',
            initials: '{{ member.initials }}'
        }{{ ',' if not loop.last }}
        {% endfor %}
    },
    dates: {
        first: '{{ dates[0].isoformat() }}',
        last: '{{ dates[-1].isoformat() }}'
    },
    urls: {
        viewSchedule: '{{ url_for("schedule.view_schedule") }}',
        exportSchedule: '{{ url_for("schedule.export_schedule") }}',
        exportWorksched: '{{ url_for("schedule.export_worksched") }}'
    }
};
</script>

<!-- Load JavaScript modules -->
<script src="{{ url_for('static', filename='js/schedule/main.js') }}"></script>
<script src="{{ url_for('static', filename='js/schedule/shifts.js') }}"></script>
<script src="{{ url_for('static', filename='js/schedule/date_remarks.js') }}"></script>
<script src="{{ url_for('static', filename='js/schedule/holidays.js') }}"></script>
<script src="{{ url_for('static', filename='js/schedule/export.js') }}"></script>
{% endblock %}
